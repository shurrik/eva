<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="com.yunji.oa.dao.IDocFormDAO">

    <sql id="Base_Column_List">
      id,
	  title title,
	  send_dep_id sendDepId,
	  send_dep sendDep,
	  no no,
	  content content,
	  remark remark,
	  charge_man_id chargeManId,
	  charge_man chargeMan,
	  contractor_id contractorId,
	  contractor contractor,
	  year year,
	  month month,
	  quarter quarter,
	  progress progress,
	  status status,
	  create_date createDate,
	  update_date updateDate,
	  publish_date publishDate
    </sql>
    <sql id="Query_condition">
      <trim prefix="WHERE" prefixOverrides="AND | OR">
              <if test="condition.title!=null">
			  	AND title Like '%${condition.title}%'
			  </if>
              <if test="condition.sendDepId!=null">
			  	AND send_dep_id Like '%${condition.sendDepId}%'
			  </if>
              <if test="condition.sendDep!=null">
			  	AND send_dep Like '%${condition.sendDep}%'
			  </if>
              <if test="condition.no!=null">
			  	AND no Like '%${condition.no}%'
			  </if>
              <if test="condition.content!=null">
			  	AND content Like '%${condition.content}%'
			  </if>
              <if test="condition.remark!=null">
			  	AND remark Like '%${condition.remark}%'
			  </if>
              <if test="condition.chargeManId!=null">
			  	AND charge_man_id Like '%${condition.chargeManId}%'
			  </if>
              <if test="condition.chargeMan!=null">
			  	AND charge_man Like '%${condition.chargeMan}%'
			  </if>
              <if test="condition.contractorId!=null">
			  	AND contractor_id Like '%${condition.contractorId}%'
			  </if>
              <if test="condition.contractor!=null">
			  	AND contractor Like '%${condition.contractor}%'
			  </if>
              <if test="condition.year!=null">
			  	AND year Like '%${condition.year}%'
			  </if>
              <if test="condition.month!=null">
			  	AND month Like '%${condition.month}%'
			  </if>
              <if test="condition.quarter!=null">
			  	AND quarter Like '%${condition.quarter}%'
			  </if>
              <if test="condition.progress!=null">
			  	AND progress Like '%${condition.progress}%'
			  </if>
              <if test="condition.status!=null">
			  	AND status Like '%${condition.status}%'
			  </if>
              <if test="condition.createDate!=null">
			  	AND create_date Like '%${condition.createDate}%'
			  </if>
              <if test="condition.updateDate!=null">
			  	AND update_date Like '%${condition.updateDate}%'
			  </if>
              <if test="condition.publishDate!=null">
			  	AND publish_date Like '%${condition.publishDate}%'
			  </if>
        </trim> 
    </sql>
    <insert id="insert" parameterType="DocForm">
        INSERT INTO t_oa_docform (
	        id,
		    title,
		    send_dep_id,
		    send_dep,
		    no,
		    content,
		    remark,
		    charge_man_id,
		    charge_man,
		    contractor_id,
		    contractor,
		    year,
		    month,
		    quarter,
		    progress,
		    status,
		    create_date,
		    update_date,
		    publish_date
        ) VALUES (
         	#{id},
       		#{title},
       		#{sendDepId},
       		#{sendDep},
       		#{no},
       		#{content},
       		#{remark},
       		#{chargeManId},
       		#{chargeMan},
       		#{contractorId},
       		#{contractor},
       		#{year},
       		#{month},
       		#{quarter},
       		#{progress},
       		#{status},
       		sysdate(),
       		sysdate()
       		#{publishDate}
        )
    </insert>

    <!-- 更新 -->
   	<update id="update" parameterType="DocForm">
        UPDATE t_oa_docform
        <trim prefix="SET" suffixOverrides=",">
          <if test="title!=null">
           title=#{title},
          </if>
          <if test="sendDepId!=null">
           send_dep_id=#{sendDepId},
          </if>
          <if test="sendDep!=null">
           send_dep=#{sendDep},
          </if>
          <if test="no!=null">
           no=#{no},
          </if>
          <if test="content!=null">
           content=#{content},
          </if>
          <if test="remark!=null">
           remark=#{remark},
          </if>
          <if test="chargeManId!=null">
           charge_man_id=#{chargeManId},
          </if>
          <if test="chargeMan!=null">
           charge_man=#{chargeMan},
          </if>
          <if test="contractorId!=null">
           contractor_id=#{contractorId},
          </if>
          <if test="contractor!=null">
           contractor=#{contractor},
          </if>
          <if test="year!=null">
           year=#{year},
          </if>
          <if test="month!=null">
           month=#{month},
          </if>
          <if test="quarter!=null">
           quarter=#{quarter},
          </if>
          <if test="progress!=null">
           progress=#{progress},
          </if>
          <if test="status!=null">
           status=#{status},
          </if>
          <if test="createDate!=null">
           create_date=#{createDate},
          </if>
          <if test="updateDate!=null">
           update_date=#{updateDate},
          </if>
          <if test="publishDate!=null">
           publish_date=#{publishDate},
          </if>
        </trim>
        WHERE
        id =#{id}
    </update>

   	<update id="updateMap">
        UPDATE t_oa_docform
        <trim prefix="SET" suffixOverrides=",">
          <if test="map.title!=null">        
           title=#{map.title},
          </if>
          <if test="map.sendDepId!=null">        
           send_dep_id=#{map.sendDepId},
          </if>
          <if test="map.sendDep!=null">        
           send_dep=#{map.sendDep},
          </if>
          <if test="map.no!=null">        
           no=#{map.no},
          </if>
          <if test="map.content!=null">        
           content=#{map.content},
          </if>
          <if test="map.remark!=null">        
           remark=#{map.remark},
          </if>
          <if test="map.chargeManId!=null">        
           charge_man_id=#{map.chargeManId},
          </if>
          <if test="map.chargeMan!=null">        
           charge_man=#{map.chargeMan},
          </if>
          <if test="map.contractorId!=null">        
           contractor_id=#{map.contractorId},
          </if>
          <if test="map.contractor!=null">        
           contractor=#{map.contractor},
          </if>
          <if test="map.year!=null">        
           year=#{map.year},
          </if>
          <if test="map.month!=null">        
           month=#{map.month},
          </if>
          <if test="map.quarter!=null">        
           quarter=#{map.quarter},
          </if>
          <if test="map.progress!=null">        
           progress=#{map.progress},
          </if>
          <if test="map.status!=null">        
           status=#{map.status},
          </if>
          <if test="map.createDate!=null">        
           create_date=#{map.createDate},
          </if>
          <if test="map.updateDate!=null">        
           update_date=#{map.updateDate},
          </if>
          <if test="map.publishDate!=null">        
           publish_date=#{map.publishDate},
          </if>
        </trim>
        WHERE
       id = #{ map.id }
	</update>


     <insert id="insertMap" >
        INSERT INTO t_oa_docform (
             	id,
			 	title,
			 	send_dep_id,
			 	send_dep,
			 	no,
			 	content,
			 	remark,
			 	charge_man_id,
			 	charge_man,
			 	contractor_id,
			 	contractor,
			 	year,
			 	month,
			 	quarter,
			 	progress,
			 	status,
			 	create_date,
			 	update_date,
			 	publish_date,
        ) VALUES (
              	#{map.id},
		    	#{map.title},
		    	#{map.sendDepId},
		    	#{map.sendDep},
		    	#{map.no},
		    	#{map.content},
		    	#{map.remark},
		    	#{map.chargeManId},
		    	#{map.chargeMan},
		    	#{map.contractorId},
		    	#{map.contractor},
		    	#{map.year},
		    	#{map.month},
		    	#{map.quarter},
		    	#{map.progress},
		    	#{map.status},
		    	#{map.createDate},
		    	#{map.updateDate},
		    	#{map.publishDate},
        )
    </insert>


  	<update id="updateNull" parameterType="DocForm">
        UPDATE t_oa_docform
        <trim prefix="SET" suffixOverrides=","> 
			    title=#{title},
			    send_dep_id=#{sendDepId},
			    send_dep=#{sendDep},
			    no=#{no},
			    content=#{content},
			    remark=#{remark},
			    charge_man_id=#{chargeManId},
			    charge_man=#{chargeMan},
			    contractor_id=#{contractorId},
			    contractor=#{contractor},
			    year=#{year},
			    month=#{month},
			    quarter=#{quarter},
			    progress=#{progress},
			    status=#{status},
			    create_date=#{createDate},
			    update_date=#{updateDate},
			    publish_date=#{publishDate},
        </trim>
        WHERE
        id =#{id}
    </update>

   	<delete id="deleteById" parameterType="java.lang.Integer">
        DELETE FROM t_oa_docform
        <trim prefix="WHERE" prefixOverrides="AND | OR">
            AND id=#{id}
        </trim>
    </delete>


 	<delete id="deleteByCondition" parameterType="java.util.Map">
        DELETE FROM  t_oa_docform 
        <trim prefix="WHERE" prefixOverrides="AND | OR">
				<if test="id!=null">
					AND id =#{id},
				</if>        
			    <if test="title!=null">
					AND title=#{title},
				</if>
			    <if test="sendDepId!=null">
					AND send_dep_id=#{sendDepId},
				</if>
			    <if test="sendDep!=null">
					AND send_dep=#{sendDep},
				</if>
			    <if test="no!=null">
					AND no=#{no},
				</if>
			    <if test="content!=null">
					AND content=#{content},
				</if>
			    <if test="remark!=null">
					AND remark=#{remark},
				</if>
			    <if test="chargeManId!=null">
					AND charge_man_id=#{chargeManId},
				</if>
			    <if test="chargeMan!=null">
					AND charge_man=#{chargeMan},
				</if>
			    <if test="contractorId!=null">
					AND contractor_id=#{contractorId},
				</if>
			    <if test="contractor!=null">
					AND contractor=#{contractor},
				</if>
			    <if test="year!=null">
					AND year=#{year},
				</if>
			    <if test="month!=null">
					AND month=#{month},
				</if>
			    <if test="quarter!=null">
					AND quarter=#{quarter},
				</if>
			    <if test="progress!=null">
					AND progress=#{progress},
				</if>
			    <if test="status!=null">
					AND status=#{status},
				</if>
			    <if test="createDate!=null">
					AND create_date=#{createDate},
				</if>
			    <if test="updateDate!=null">
					AND update_date=#{updateDate},
				</if>
			    <if test="publishDate!=null">
					AND publish_date=#{publishDate},
				</if>
        </trim>
    </delete>

    <delete id="deleteByProperty" parameterType="java.util.Map">
        DELETE FROM t_oa_docform WHERE
        ${column}=#{value}
    </delete>

    <select id="fetch" parameterType="java.lang.Integer" resultType="DocForm">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_oa_docform
        <trim prefix="WHERE" prefixOverrides="AND | OR">
            AND id =#{id}
        </trim>
    </select>

    <select id="findOne" parameterType="java.util.Map" resultType="DocForm">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_oa_docform WHERE
        ${column}=#{value} 
        LIMIT 0,1
    </select>

    <select id="findList" parameterType="java.util.Map" resultType="DocForm">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_oa_docform WHERE
       	${column} =#{value}
    </select>

    <select id="findAll" resultType="DocForm">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_oa_docform
    </select>

    <select id="queryPage" resultType="DocForm">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_oa_docform
       <include refid="Query_condition" />        
        <if test="condition.sort != null">
			order by ${condition.sort}
		</if>
        <if test="offset != null">
            limit ${offset}, ${rows}
        </if>
    </select>

    <select id="like" parameterType="java.util.Map" resultType="DocForm">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_oa_docform
        <trim prefix="WHERE" prefixOverrides="AND | OR">
			<if test="id!=null">
				AND id like '%#{id}%'
			</if>
			<if test="title!=null">
				AND title Like '%$ {condition.title}%'
			</if>
			<if test="sendDepId!=null">
				AND send_dep_id Like '%$ {condition.sendDepId}%'
			</if>
			<if test="sendDep!=null">
				AND send_dep Like '%$ {condition.sendDep}%'
			</if>
			<if test="no!=null">
				AND no Like '%$ {condition.no}%'
			</if>
			<if test="content!=null">
				AND content Like '%$ {condition.content}%'
			</if>
			<if test="remark!=null">
				AND remark Like '%$ {condition.remark}%'
			</if>
			<if test="chargeManId!=null">
				AND charge_man_id Like '%$ {condition.chargeManId}%'
			</if>
			<if test="chargeMan!=null">
				AND charge_man Like '%$ {condition.chargeMan}%'
			</if>
			<if test="contractorId!=null">
				AND contractor_id Like '%$ {condition.contractorId}%'
			</if>
			<if test="contractor!=null">
				AND contractor Like '%$ {condition.contractor}%'
			</if>
			<if test="year!=null">
				AND year Like '%$ {condition.year}%'
			</if>
			<if test="month!=null">
				AND month Like '%$ {condition.month}%'
			</if>
			<if test="quarter!=null">
				AND quarter Like '%$ {condition.quarter}%'
			</if>
			<if test="progress!=null">
				AND progress Like '%$ {condition.progress}%'
			</if>
			<if test="status!=null">
				AND status Like '%$ {condition.status}%'
			</if>
			<if test="createDate!=null">
				AND create_date Like '%$ {condition.createDate}%'
			</if>
			<if test="updateDate!=null">
				AND update_date Like '%$ {condition.updateDate}%'
			</if>
			<if test="publishDate!=null">
				AND publish_date Like '%$ {condition.publishDate}%'
			</if>
        </trim>
    </select>


 	<select id="queryList" parameterType="java.util.Map" resultType="DocForm">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_oa_docform
        <trim prefix="WHERE" prefixOverrides="AND | OR">
            <if test="id!=null">
                AND id =#{id}
            </if>
			<if test="title!=null">
				AND title = #{title}
			</if>
			<if test="sendDepId!=null">
				AND send_dep_id = #{sendDepId}
			</if>
			<if test="sendDep!=null">
				AND send_dep = #{sendDep}
			</if>
			<if test="no!=null">
				AND no = #{no}
			</if>
			<if test="content!=null">
				AND content = #{content}
			</if>
			<if test="remark!=null">
				AND remark = #{remark}
			</if>
			<if test="chargeManId!=null">
				AND charge_man_id = #{chargeManId}
			</if>
			<if test="chargeMan!=null">
				AND charge_man = #{chargeMan}
			</if>
			<if test="contractorId!=null">
				AND contractor_id = #{contractorId}
			</if>
			<if test="contractor!=null">
				AND contractor = #{contractor}
			</if>
			<if test="year!=null">
				AND year = #{year}
			</if>
			<if test="month!=null">
				AND month = #{month}
			</if>
			<if test="quarter!=null">
				AND quarter = #{quarter}
			</if>
			<if test="progress!=null">
				AND progress = #{progress}
			</if>
			<if test="status!=null">
				AND status = #{status}
			</if>
			<if test="createDate!=null">
				AND create_date = #{createDate}
			</if>
			<if test="updateDate!=null">
				AND update_date = #{updateDate}
			</if>
			<if test="publishDate!=null">
				AND publish_date = #{publishDate}
			</if>
        </trim>
        ORDER BY ${orderBy} ${sortBy}
    </select>

   	<select id="queryOne" parameterType="java.util.Map" resultType="DocForm">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_oa_docform
        <trim prefix="WHERE" prefixOverrides="AND | OR">
            <if test="id!=null">
                AND id =#{id}
            </if>
			<if test="title!=null">
				AND title = #{title}
			</if>
			<if test="sendDepId!=null">
				AND send_dep_id = #{sendDepId}
			</if>
			<if test="sendDep!=null">
				AND send_dep = #{sendDep}
			</if>
			<if test="no!=null">
				AND no = #{no}
			</if>
			<if test="content!=null">
				AND content = #{content}
			</if>
			<if test="remark!=null">
				AND remark = #{remark}
			</if>
			<if test="chargeManId!=null">
				AND charge_man_id = #{chargeManId}
			</if>
			<if test="chargeMan!=null">
				AND charge_man = #{chargeMan}
			</if>
			<if test="contractorId!=null">
				AND contractor_id = #{contractorId}
			</if>
			<if test="contractor!=null">
				AND contractor = #{contractor}
			</if>
			<if test="year!=null">
				AND year = #{year}
			</if>
			<if test="month!=null">
				AND month = #{month}
			</if>
			<if test="quarter!=null">
				AND quarter = #{quarter}
			</if>
			<if test="progress!=null">
				AND progress = #{progress}
			</if>
			<if test="status!=null">
				AND status = #{status}
			</if>
			<if test="createDate!=null">
				AND create_date = #{createDate}
			</if>
			<if test="updateDate!=null">
				AND update_date = #{updateDate}
			</if>
			<if test="publishDate!=null">
				AND publish_date = #{publishDate}
			</if>
        </trim>
        limit 0,1
    </select>

  	<select id="count" resultType="java.lang.Integer">
        SELECT count(id) FROM t_oa_docform
        <include refid="Query_condition" />  
    </select>

	<select id="selectMaxId" resultType="java.lang.Integer">
	    SELECT
	    MAX(id)
	    FROM t_oa_docform
	</select>

</mapper>

